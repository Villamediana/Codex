<nav class="top-nav">
  <!-- botão (mobile) -->
  <button class="menu-toggle" onclick="toggleSidebar()">☰</button>

  <!-- links principais -->
  <div class="nav-links">
    <a href="{{ url_for('index') }}"         class="{% if request.endpoint == 'index' %}active{% endif %}">Projetos</a>
    <a href="{{ url_for('pilares_view') }}"  class="{% if request.endpoint == 'pilares_view' %}active{% endif %}">Pensamento Computacional</a>
    <a href="{{ url_for('microbit_view') }}" class="{% if request.endpoint == 'microbit_view' %}active{% endif %}">Sobre micro:bit</a>
    <a href="{{ url_for('habilidades_view') }}" class="{% if request.endpoint == 'habilidades_view' %}active{% endif %}">Habilidades</a>
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSfqf776C8mtneSYdsFmEV6RDLfmqXuI-46qhDPs3jMf7vACwg/viewform?usp=header" class="btn-formulario">Formulario</a>
    <a href="{{ url_for('create') }}" id="btn-create" class="btn-create" style="display:none">+ Novo</a>
  </div>
</nav>

<script>
  // Função para verificar se a liberação ainda está válida (1 dia)
  function liberacaoValida() {
    var ts = localStorage.getItem('liberar_novo_ate');
    if (!ts) return false;
    return Date.now() < parseInt(ts);
  }

  // Oculta o botão
  function ocultarNovo() {
    var btn = document.getElementById("btn-create");
    if (btn) btn.style.display = "none";
    console.log("Botão ocultado!");
  }

  // Mostra o botão
  function mostrarNovo() {
    var btn = document.getElementById("btn-create");
    if (btn) btn.style.display = "";
    console.log("Botão + Novo liberado!");
  }

  // Executa ao carregar: verifica se está liberado
  window.addEventListener('DOMContentLoaded', function() {
    if (liberacaoValida()) {
      mostrarNovo();
    } else {
      ocultarNovo();
    }
  });

  // Função global para liberar (ativa por 1 dia)
  window.liberar = function() {
    localStorage.setItem('liberar_novo_ate', Date.now() + 24*60*60*1000);
    mostrarNovo();
  };

  // Função global para ocultar e remover permissão
  window.ocultar = function() {
    localStorage.removeItem('liberar_novo_ate');
    ocultarNovo();
  };
</script>
